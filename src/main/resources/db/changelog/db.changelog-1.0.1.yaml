databaseChangeLog:
  - changeSet:
      id: 1664287754-1
      author: gingaone.team
      changes:

        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_split_distribution
                  name: id
                  type: UUID
              - column:
                  name: created_at
                  type: TIMESTAMP WITH TIME ZONE
              - column:
                  name: updated_at
                  type: TIMESTAMP WITH TIME ZONE
              - column:
                  name: order_id
                  type: VARCHAR(255)
              - column:
                  name: organization_id
                  type: VARCHAR(255)
              - column:
                  name: organization_identity
                  type: VARCHAR(255)
              - column:
                  name: order_payment_date
                  type: TIMESTAMP WITH TIME ZONE
            tableName: split_distributions

        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_distribution
                  name: id
                  type: UUID
              - column:
                  name: store_id
                  type: VARCHAR(255)
              - column:
                  name: store_identity
                  type: VARCHAR(255)
              - column:
                  name: split_distribution_id
                  type: UUID
            tableName: distributions

        - createTable:
            columns:
              - column:
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_result
                  name: id
                  type: UUID
              - column:
                  name: transaction_amount
                  type: numeric(19, 3)
              - column:
                  name: transaction_installment_amount
                  type: numeric(19, 3)
              - column:
                  name: amount_difference
                  type: numeric(19, 3)
              - column:
                  name: transaction_date
                  type: TIMESTAMP
              - column:
                  name: payment_type
                  type: VARCHAR(255)
              - column:
                  name: installments
                  type: INTEGER
              - column:
                  name: distribution_id
                  type: UUID
              - column:
                  name: payment_solution_name
                  type: VARCHAR(255)
              - column:
                  name: transaction_id
                  type: VARCHAR(255)
              - column:
                  name: flag
                  type: VARCHAR(255)
            tableName: results

        - addForeignKeyConstraint:
            baseColumnNames: split_distribution_id
            baseTableName: distributions
            constraintName: fk_distributions_split_distributions
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: split_distributions
            referencedTableSchemaName: public
            validate: true

        - addForeignKeyConstraint:
            baseColumnNames: distribution_id
            baseTableName: results
            constraintName: fk_results_distributions
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: distributions
            referencedTableSchemaName: public
            validate: true
